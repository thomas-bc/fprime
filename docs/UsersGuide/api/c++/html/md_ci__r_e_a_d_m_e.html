<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: F´Continuous Integration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F´ Flight Software - C/C++ Documentation
   &#160;<span id="projectnumber">devel</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_ci__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">F´Continuous Integration </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><blockquote class="doxtable">
<p>Note: The information below is historical. Modern F´ uses GitHub Action for all of its CI. </p>
</blockquote>
<p>F´continuous integration was developed to work with Jenkins. The continuous integration project is designed to checkout a new pull request that has been submitted to F´, merge it with the base branch, and then build the merged construct. Then the unit tests are built and run against this merge. This proves that the build is ready for review and merge.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Jenkins Description</h1>
<p>The Jenkins setup exists in the <code>config.xml</code> file in this directory. It should be noted that the secrets (passwords, keys, etc.) have been stripped and should be replaced.</p>
<p>The Jenkins CI is configured with the expressed purpose of checking the build and unit tests for a given pull request. It does not build on a set interval, nor does it build a specific branch (master, devel) but rather whatever branch the pull request was based on.</p>
<p>The Jenkins CI is setup to be built inside a docker container. This docker container is used to encapsulate the exact build environment without needing to setup a specific Jenkins machine with this build environment. It needs to be run on a Docker capable Jenkins machine.</p>
<p>Once Jenkins CI builds the Docker container from the Dockerfile, it runs the Python Test Framework, which includes the following test suites:</p>
<ol type="1">
<li>Reference Build and Unit Tests</li>
<li>Autocoder Unit Tests</li>
</ol>
<h1><a class="anchor" id="autotoc_md2"></a>
Using Jenkins</h1>
<p>In order to use the existing Jenkins configuration, one can post it to the server of their choice using the following basic command. This command may need to be altered to supply credentials or setup proxies, but this is outside this guide.</p>
<p>This <code>config.xml</code> contains <code>FILL-ME</code> tokens where various project specific configuration items belong. These mostly represent passwords, or other secrets that should not be exposed. A user can edit the config.xml file directly before POSTing the XML to the server. Alternatively, the user can POST the XML and make the edits in the Jenkins GUI.</p>
<p><b>POST Jenkins Config as New Job</b> </p><div class="fragment"><div class="line">fprime&gt;curl -X POST http://&lt;jenkins host&gt;/createItem?name=&lt;job name&gt;&#39; --header &quot;Content-Type: application/xml&quot; -d mk/ci/config.xml</div>
</div><!-- fragment --><p> Here the user must supply the <code>&lt;jenkins host&gt;</code> and <code>&lt;job name&gt;</code> to create a job on the given host with the given job name.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Advanced Jenkins</h1>
<h2><a class="anchor" id="autotoc_md4"></a>
Daily and Manual Builds</h2>
<p>Some users like to have a repeating build of Jenkins on a Daily or Weekly schedule to ensure that the common branch (master, devel) are consistent and correct. This can be done by setting a scheduled build trigger and, if using the above <code>config.xml</code>, the <code>${ghprbActualCommit}</code> and <code>${ghprbTargetBranch}</code> environment variables should be set to the desired branch to build. This can be done in Jenkins's environment setup. This allows manual and scheduled builds without creating a separate job by defaulting the variables used by the Pull Request builder. The user could also setup a separate job to handle this.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Future Jenkins Work</h1>
<p>The following CI items are yet to be implemented:</p>
<ol type="1">
<li>Run <code>Ref</code> App and ensure that it is stable</li>
<li>Setup system level tests against <code>Ref</code> </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
